# JS 中的==和===

在网上冲浪时突然间看见了一个这样的题目(据说来自阿里云面试题)

```js
var a = ?

console.log(
a==1 &&
a==2 &&
a==3
)
```

问如何才能让打印的结果为`true`？

看完这题你说不定~~对面试官的心理产生严重的怀疑~~，但是如果你一看就知道如何做，那你对js的理解已经到了一定深度


在 JavaScript 中，== 和 === 都是用来比较两个值是否相等的运算符，但他们之间肯定有区别

- == 运算符：用来进行一般比较，检测两个操作数是否相等，可以允许进行类型转换。
- === 运算符：用于严格比较，只要类型不匹配就返回 false。
对于 string、number 等基础类型，== 和 === 有区别。例如："1" == true，这个比较中左侧为字符串类型，右侧为布尔类型，左右两侧类型不同，因此会先进行类型转换，把 true 转换为 1，即为 "1" == 1；此时，类型仍不同，继续进行类型转换，把 "1" 转换为 1，即为 1 == 1，最终结果为 true。如果比较："1" === true，左侧为字符型，右侧为布尔型或数值型，左右两侧类型不同，结果为 false

在比较对象时，== 和 === 的结果相同，因为它们都是比较对象的引用

值得注意的是，== 运算符的类型转换可能会导致一些奇怪的结果，尤其是在比较 null 和 undefined 时。例如，null == undefined 的结果为 true，但 null === undefined 的结果为 false

在实际应用中，应该尽量使用 === 运算符，因为它可以避免类型转换带来的问题。如果需要进行类型转换，应该先手动进行类型转换，再进行比较

对于 string、number 等基础类型，== 和 === 是有区别的
在比较对象时，== 和 === 的结果相同
应该尽量使用 === 运算符，避免类型转换带来的问题

此外还有Object.is，它与===差不多，只不过有几种特殊情况，+0和-0会返回false, NaN和NaN会返回true

题目考察的是==的判断原则

如果==判断的对象是object怎么办？

首先会调用.valueOf方法，如果依然是object怎么办？
那就只能toString了

所以，到现在你应该有了一个基本的思路: 
修改valueOf方法, 自己写一个把原来的覆盖掉
或者toString也可以

我们题目中比较了三次:
- a==1
- a==2
- a==3

我们需要都返回`true`，该如何做呢？

观察发现，需要第一次比较a=1, 第二次a=2...
那我们可以每次返回调用次数

所以
```js
var a={
n: 1, 
valueOf(){
    return this.n++
    }
}
```

大功告成, 此时你允许会发现打印的就是`true`了

## 总结

如果==判断的对象是object
首先会调用.valueOf方法，如果依然是object, 调用toString
